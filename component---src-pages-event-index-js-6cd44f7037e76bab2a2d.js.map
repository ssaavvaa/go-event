{"version":3,"sources":["webpack:///./src/components/postMessage.js","webpack:///./src/pages/event/index.js","webpack:///./node_modules/core-js/modules/es7.string.pad-start.js","webpack:///./node_modules/core-js/modules/_string-pad.js","webpack:///./node_modules/core-js/modules/_string-repeat.js"],"names":["WithSession","props","_useState","useState","message","state","setState","sendMessage","postMessage","_ref2","then","regenerator_default","a","mark","_callee","_ref","wrap","_context","prev","next","data","refetch","stop","_x","apply","this","arguments","eventId","username","getCurrentUser","react_default","createElement","react","react_apollo_esm","mutation","POST_MESSAGE","variables","className","value","onChange","val","target","setMessage","type","placeholder","onClick","allMessages","useEffect","console","log","reFetchObservableQueries","_id","location","search","split","layout","seo","title","query","GET_EVENT","loading","error","components_loading","Error","undefined","_data$getEvent","getEvent","messages","heading","length","map","key","Date","Number","createDate","toDateString","getHours","toString","padStart","getMinutes","getSeconds","subscription","NEW_MESSAGE","push","comment","components_postMessage","$export","__webpack_require__","$pad","userAgent","WEBKIT_BUG","test","P","F","maxLength","toLength","repeat","defined","module","exports","that","fillString","left","S","String","stringLength","fillStr","intMaxLength","fillLen","stringFiller","call","Math","ceil","slice","toInteger","count","str","res","n","Infinity","RangeError"],"mappings":"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","file":"component---src-pages-event-index-js-6cd44f7037e76bab2a2d.js","sourcesContent":["import React , { useState, Fragment } from \"react\";\r\nimport WithSession from '../components/withSession'\r\nimport { Mutation } from 'react-apollo';\r\nimport { POST_MESSAGE} from '../queries/index';\r\n\r\n\r\nconst PostMessage = (props) => {\r\n\r\n    const [state , setState] = useState({\r\n        message:''\r\n    })\r\n\r\n    const setMessage = val => {\r\n        const message = val.target.value\r\n        setState({message})\r\n    }\r\n\r\n    const sendMessage = (postMessage) => {\r\n        postMessage().then(async({data}) => {\r\n         setState({message:\"\"})\r\n         props.refetch();\r\n        })\r\n    }\r\n\r\n    const { eventId } = props;\r\n    const { username } = props.getCurrentUser || \"\";\r\n    const { message } = state;\r\n\r\n\r\n\r\n\r\n\r\nif(props.getCurrentUser !== null){\r\n    return (\r\n        <Fragment>\r\n          <Mutation  mutation ={POST_MESSAGE} variables = {{username , eventId, message }} >\r\n          {postMessage => {\r\n          return (\r\n            <Fragment>\r\n                  <div className=\"bottom_messages\">\r\n                     <input value={message} onChange={val => setMessage(val)} type=\"text\" placeholder=\"type your message\"></input>\r\n\r\n                     <button onClick={() => sendMessage(postMessage)} type=\"submit\"> send message</button>\r\n                  </div>\r\n             </Fragment>\r\n          )}}\r\n        </Mutation>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nreturn(<div className=\"bottom_unAuth\">LogIn to send messages</div>)\r\n}\r\n\r\nexport default WithSession(PostMessage);","import React , { Fragment , useEffect } from \"react\";\r\nimport Layout from '../../components/layout';\r\nimport SEO from '../../components/seo';\r\nimport { Query , Subscription } from 'react-apollo';\r\nimport { GET_EVENT , NEW_MESSAGE } from '../../queries/index';\r\nimport Loading from '../../components/loading'\r\nimport '../../styles/event.css';\r\nimport PostMessage from '../../components/postMessage';\r\nimport WithSession from '../../components/withSession';\r\nimport Error from '../../components/Error';\r\n\r\nlet allMessages = []\r\n\r\nconst Event = (props) => {\r\n\r\nuseEffect(() => {\r\n    allMessages = []\r\n    console.log(props)\r\n    props.reFetchObservableQueries()\r\n},[])\r\n\r\nconst _id = props.location.search.split('?_id=')[1]\r\n\r\n\r\n    return(\r\n        <Layout>\r\n        <SEO title=\"sign-in\" />\r\n        <Query    query ={GET_EVENT} variables={{_id}} >\r\n        {({data , loading , error}) => {\r\n            if(loading){ return <Loading /> }\r\n            if( error ) { return <Error error={error} /> }\r\n            if(data === undefined){ return <div className=\"deleted_page\">\r\n                <p>THIS EVENT WAS DELETED BY CREATOR!</p>\r\n            </div>}\r\n            const { messages , heading } = data.getEvent;\r\n            console.log(data)\r\n         return (\r\n            <Fragment>\r\n              <h2 className=\"main_heading_chat\">{heading}</h2>\r\n              <p className=\"event_chat\">Event Chat</p>\r\n              <div className=\"chat_window\">\r\n              {!messages.length && <p className=\"no_message\">No message was created yet</p>}\r\n                  {messages.map(message => (\r\n                      <div key={message._id} className=\"message\">\r\n                      <span><small>{message.username}</small></span>:{\" \"}\r\n                      <span><small>\r\n              {new Date(Number(message.createDate)).toDateString()}\r\n              __\r\n              {new Date(Number(message.createDate)).getHours().toString().padStart(2, \"0\")}{\" \"}\r\n             :{new Date(Number(message.createDate)).getMinutes().toString().padStart(2, \"0\")}{\" \"}\r\n             :{new Date(Number(message.createDate)).getSeconds().toString().padStart(2, \"0\")}{\" \"}\r\n             </small></span>\r\n                      <p><strong>{message.message}</strong></p>\r\n                      </div>\r\n                  ))}\r\n                   <Subscription \r\n                    subscription ={NEW_MESSAGE} variables={{eventId:_id}} >\r\n                     {({data , loading , error}) => {\r\n                         if(data !== undefined){\r\n                             allMessages.push(data.comment)\r\n                             return (\r\n                                 allMessages.map( message => (\r\n                                    <div key={message._id} className=\"message\">\r\n                                    <span><small>{message.username}</small></span>:{\" \"}\r\n                                    <span><small>\r\n                            {new Date(Number(message.createDate)).toDateString()}\r\n                            __\r\n                            {new Date(Number(message.createDate)).getHours().toString().padStart(2, \"0\")}{\" \"}\r\n                           :{new Date(Number(message.createDate)).getMinutes().toString().padStart(2, \"0\")}{\" \"}\r\n                           :{new Date(Number(message.createDate)).getSeconds().toString().padStart(2, \"0\")}{\" \"}\r\n                           </small></span>\r\n                                    <p><strong>{message.message}</strong></p>\r\n                                    </div>\r\n                                 ))\r\n                            )\r\n                         }\r\n                         return( <span className=\"display_none\"></span>)\r\n                     }}\r\n                     </Subscription>\r\n                     </div>\r\n                     <PostMessage eventId ={_id} />\r\n             </Fragment>\r\n         )\r\n        }}\r\n        </Query>\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default WithSession(Event);\r\n\r\n\r\n","'use strict';\n// https://github.com/tc39/proposal-string-pad-start-end\nvar $export = require('./_export');\nvar $pad = require('./_string-pad');\nvar userAgent = require('./_user-agent');\n\n// https://github.com/zloirock/core-js/issues/280\nvar WEBKIT_BUG = /Version\\/10\\.\\d+(\\.\\d+)?( Mobile\\/\\w+)? Safari\\//.test(userAgent);\n\n$export($export.P + $export.F * WEBKIT_BUG, 'String', {\n  padStart: function padStart(maxLength /* , fillString = ' ' */) {\n    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, true);\n  }\n});\n","// https://github.com/tc39/proposal-string-pad-start-end\nvar toLength = require('./_to-length');\nvar repeat = require('./_string-repeat');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, maxLength, fillString, left) {\n  var S = String(defined(that));\n  var stringLength = S.length;\n  var fillStr = fillString === undefined ? ' ' : String(fillString);\n  var intMaxLength = toLength(maxLength);\n  if (intMaxLength <= stringLength || fillStr == '') return S;\n  var fillLen = intMaxLength - stringLength;\n  var stringFiller = repeat.call(fillStr, Math.ceil(fillLen / fillStr.length));\n  if (stringFiller.length > fillLen) stringFiller = stringFiller.slice(0, fillLen);\n  return left ? stringFiller + S : S + stringFiller;\n};\n","'use strict';\nvar toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n\nmodule.exports = function repeat(count) {\n  var str = String(defined(this));\n  var res = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError(\"Count can't be negative\");\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) res += str;\n  return res;\n};\n"],"sourceRoot":""}